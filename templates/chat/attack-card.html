<div class="hm3 chat-card item-card" data-actor-id="{{actorId}}">
    <header class="card-header flexrow">
        <h3 class="title">{{title}}</h3>
    </header>

    {{#if notes}}
    <div class="card-note">
        <span>{{notes}}</span>
    </div>
    {{/if}}

    <div class="card-content">
        <span class="label">Attacker:</span>
        <span class="value">{{attacker}}</span>
    </div>

    <div class="card-content">
        <span class="label">Defender:</span>
        <span class="value">{{defender}}</span>
    </div>

    <div class="card-content">
        <span class="label">Aim:</span>
        <span class="value">{{aim}}</span>
    </div>

    <div class="card-content">
        <span class="label">Aspect:</span>
        <span class="value">{{aspect}}</span>
    </div>

    {{#if rangeDist}}
    <div class="card-content">
        <span class="label">Distance (Range/Modifier):</span>
        <span class="value">{{rangeDist}} ({{rangeText}}/{{rangeModSign}}{{rangeModifierAbs}})</span>
    </div>
    {{/if}}

    {{#if (gt addlModifierAbs 0)}}
    <div class="card-content">
        <span class="label">Additional Modifier:</span>
        <span class="value">{{addlModifierSign}}{{addlModifierAbs}}</span>
    </div>
    {{/if}}

    {{#if (or rangeDist addlModifierAbs)}}
    <div class="card-content">
        <span class="label">Original AML:</span>
        <span class="value">{{origAML}}</span>
    </div>

    <div class="card-content">
        <span class="label">Effective AML:</span>
        <span class="value">{{origAML}} {{#if rangeDist}}{{rangeModSign}} {{rangeModifier}} {{/if}}{{#if addlModifierAbs}}{{addlModifierSign}} {{addlModifierAbs}} {{/if}}= <strong>{{effAML}}</strong></span>
    </div>
    {{else}}
    <div class="card-content">
        <span class="label">AML:</span>
        <span class="value"><strong>{{effAML}}</strong></span>
    </div>
    {{/if}}

    <div class="card-buttons">
        {{#if hasDodge}}
        <button data-action="dodge" data-atk-token-id="{{atkTokenId}}" data-def-token-id="{{defTokenId}}"
            data-eff-aml="{{effAML}}" data-weapon-type="{{weaponType}}" data-weapon="{{weaponName}}"
            data-aim="{{aim}}" data-aspect="{{aspect}}" data-impact-mod="{{impactMod}}">Dodge</button>
        {{/if}}
    
        {{#if hasCounterstrike}}
        <button data-action="counterstrike" data-atk-token-id="{{atkTokenId}}" data-def-token-id="{{defTokenId}}"
            data-eff-aml="{{effAML}}" data-weapon-type="{{weaponType}}" data-weapon="{{weaponName}}"
            data-aim="{{aim}}" data-aspect="{{aspect}}" data-impact-mod="{{impactMod}}">Counterstrike</button>
        {{/if}}
    
        {{#if hasBlock}}
        <button data-action="block" data-atk-token-id="{{atkTokenId}}" data-def-token-id="{{defTokenId}}"
            data-eff-aml="{{effAML}}" data-weapon-type="{{weaponType}}" data-weapon="{{weaponName}}"
            data-aim="{{aim}}" data-aspect="{{aspect}}" data-impact-mod="{{impactMod}}">Block</button>
        {{/if}}
    
        {{#if hasIgnore}}
        <button data-action="ignore" data-atk-token-id="{{atkTokenId}}" data-def-token-id="{{defTokenId}}"
            data-eff-aml="{{effAML}}" data-weapon-type="{{weaponType}}" data-weapon="{{weaponName}}"
            data-aim="{{aim}}" data-aspect="{{aspect}}" data-impact-mod="{{impactMod}}">Ignore</button>
        {{/if}}    
    </div>
</div>
